# radar-grafana

![Version: 0.1.1](https://img.shields.io/badge/Version-0.1.1-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.2.1](https://img.shields.io/badge/AppVersion-1.2.1-informational?style=flat-square)

A Helm chart for RADAR-base Grafana. This is based on the original Grafana image with some custom dashboards and data sources already integrated. For more details see "https://github.com/RADAR-base/RADAR-Grafana".

**Homepage:** <https://radar-base.org>

## Maintainers

| Name                | Email                   | Url |
| ------------------- | ----------------------- | --- |
| Keyvan Hedayati     | keyvan@thehyve.nl       |     |
| Joris Borgdorff     | joris@thehyve.nl        |     |
| Nivethika Mahasivam | nivethika@thehyve.nl    |     |
| Pauline Conde       | pauline.conde@kcl.ac.uk |     |

## Source Code

- <https://github.com/RADAR-base/RADAR-Grafana>

## Prerequisites

- Kubernetes 1.17+
- Kubectl 1.17+
- Helm 3.1.0+

## Values

| Key                                                                  | Type    | Default                                                                                                                                                                                                                                                   | Description                                                                                                                                    |
| -------------------------------------------------------------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| replicaCount                                                         | int     | `1`                                                                                                                                                                                                                                                       | Number of Grafana replicas to deploy                                                                                                           |
| image.repository                                                     | string  | `"grafana/grafana"`                                                                                                                                                                                                                                       | Grafana image repository                                                                                                                       |
| image.tag                                                            | string  | `"8.0.1"`                                                                                                                                                                                                                                                 | Grafana image tag (immutable tags are recommended) Overrides the image tag whose default is the chart appVersion.                              |
| image.pullPolicy                                                     | string  | `"IfNotPresent"`                                                                                                                                                                                                                                          | Grafana image pull policy                                                                                                                      |
| resources.limits                                                     | object  | `{"cpu":"1000m"}`                                                                                                                                                                                                                                         | CPU/Memory resource limits                                                                                                                     |
| resources.requests                                                   | object  | `{"cpu":"100m","memory":"128Mi"}`                                                                                                                                                                                                                         | CPU/Memory resource requests                                                                                                                   |
| nodeSelector                                                         | object  | `{}`                                                                                                                                                                                                                                                      | Node labels for pod assignment                                                                                                                 |
| tolerations                                                          | list    | `[]`                                                                                                                                                                                                                                                      | Toleration labels for pod assignment                                                                                                           |
| affinity                                                             | object  | `{}`                                                                                                                                                                                                                                                      | Affinity labels for pod assignment                                                                                                             |
| datasources.datasources.yaml                                         | -       | `` | Values added here will be converted to a datasources.yaml config file which contain the provisioned data source configuration.                                                                                                                       |
| datasources.datasources.yaml.datasources.id                          | int     | `1`                                                                                                                                                                                                                                                       | Custom ID which can be used to reference this datasource in other parts of the configuration, if not specified will be generated automatically |
| datasources.datasources.yaml.datasources.orgId                       | int     | `1`                                                                                                                                                                                                                                                       | Org id. will default to orgId 1 if not specified                                                                                               |
| datasources.datasources.yaml.datasources.name                        | string  | `"PostgreSQL"`                                                                                                                                                                                                                                            | Name of datasource.                                                                                                                            |
| datasources.datasources.yaml.datasources.type                        | string  | `"postgres"`                                                                                                                                                                                                                                              | Datasource type.                                                                                                                               |
| datasources.datasources.yaml.datasources.typeLogoUrl                 | string  | `"public/app/plugins/datasource/postgres/img/postgresql_logo.svg"`                                                                                                                                                                                        | Datasource type logo url.                                                                                                                      |
| datasources.datasources.yaml.datasources.access                      | string  | `"proxy"`                                                                                                                                                                                                                                                 | Access mode. proxy or direct (Server or Browser in the UI).                                                                                    |
| datasources.datasources.yaml.datasources.url                         | string  | `"${POSTGRES_HOST}"`                                                                                                                                                                                                                                      | Datasource url. This can be modified directly or from `env.POSTGRES_HOST`.                                                                     |
| datasources.datasources.yaml.datasources.password                    | string  | `"${POSTGRES_PASSWORD}"`                                                                                                                                                                                                                                  | Datasource password. This can be modified directly or from `env.POSTGRES_PASSWORD`.                                                            |
| datasources.datasources.yaml.datasources.user                        | string  | `"${POSTGRES_USER}"`                                                                                                                                                                                                                                      | Datasource user. This can be modified directly or from `env.POSTGRES_USER`.                                                                    |
| datasources.datasources.yaml.datasources.database                    | string  | `"${POSTGRES_DB}"`                                                                                                                                                                                                                                        | Datasource database. This can be modified directly or from `env.POSTGRES_DB`.                                                                  |
| datasources.datasources.yaml.datasources.basicAuth                   | boolean | `false`                                                                                                                                                                                                                                                   | Values added here will be converted to a datasources.yaml config file which contain the provisioned data source configuration.                 |
| datasources.datasources.yaml.datasources.isDefault                   | boolean | `true`                                                                                                                                                                                                                                                    | Values added here will be converted to a datasources.yaml config file which contain the provisioned data source configuration.                 |
| datasources.datasources.yaml.datasources.jsonData.postgresVersion    | int     | `1200`                                                                                                                                                                                                                                                    | Postgres version as a number (903/904/905/906/1000) meaning v9.3, v9.4, …, v10.                                                                |
| datasources.datasources.yaml.datasources.jsonData.timescaledb        | boolean | `true`                                                                                                                                                                                                                                                    | Enable usage of TimescaleDB extension.                                                                                                         |
|                                                                      |
| datasources.datasources.yaml.datasources.jsonData.sslmode            | string  | `"disable"`                                                                                                                                                                                                                                               | SSLmode. ‘disable’, ‘require’, ‘verify-ca’ or ‘verify-full’.                                                                                   |
| datasources.datasources.yaml.datasources.readOnly                    | boolean | `true`                                                                                                                                                                                                                                                    | Disallow users to edit datasources from the UI.                                                                                                |
| dashboardProviders.dashboardproviders.yaml                           | -       | `` | Values added here will be converted to a dashboardproviders.yaml config file which contain the provisioned dashboards configuration.                                                                                                                 |
| dashboardProviders.dashboardproviders.yaml.providers.name            | string  | `"allprojectss"`                                                                                                                                                                                                                                          | An unique provider name.                                                                                                                       |
| dashboardProviders.dashboardproviders.yaml.providers.orgId           | int     | `1`                                                                                                                                                                                                                                                       | Org id.                                                                                                                                        |
| dashboardProviders.dashboardproviders.yaml.providers.folder          | string  | `"All Projects"`                                                                                                                                                                                                                                          | Name of the dashboard folder.                                                                                                                  |
| dashboardProviders.dashboardproviders.yaml.providers.type            | string  | `"file"`                                                                                                                                                                                                                                                  | Provider type.                                                                                                                                 |
| dashboardProviders.dashboardproviders.yaml.providers.disableDeletion | boolean | `false`                                                                                                                                                                                                                                                   | Disable dashboard deletion.                                                                                                                    |
| dashboardProviders.dashboardproviders.yaml.providers.editable        | boolean | `true`                                                                                                                                                                                                                                                    | Allow dashbaord to be editable from the UI.                                                                                                    |
| dashboardProviders.dashboardproviders.yaml.providers.options.path    | string  | `"/var/lib/grafana/dashboards/allprojectss"`                                                                                                                                                                                                              | Path to dashboard files on disk. Required when using the 'file' type                                                                           |
| grafana.ini                                                          | -       | `` | All variables under this can be used to update the "grafana.ini" configuration file. Values added here will be converted to .ini format. Please refer to "https://grafana.com/docs/grafana/v8.0/administration/configuration/" for more information. |
| grafana.ini.paths.data                                               | string  | `"/var/lib/grafana/"`                                                                                                                                                                                                                                     | Path to where Grafana stores the sqlite3 database (if used), file-based sessions (if used), and other data.                                    |
| grafana.ini.paths.logs                                               | string  | `"/var/log/grafana/"`                                                                                                                                                                                                                                     | Path to where Grafana stores logs.                                                                                                             |
| grafana.ini.paths.plugins                                            | string  | `"/var/lib/grafana/plugins"`                                                                                                                                                                                                                              | Directory where Grafana automatically scans and looks for plugins.                                                                             |
| grafana.ini.paths.provisioning                                       | string  | `"/etc/grafana/provisioning"`                                                                                                                                                                                                                             | Folder that contains provisioning config files that Grafana will apply on startup                                                              |
| grafana.ini.metrics.basic_auth_username                              | string  | `"username"`                                                                                                                                                                                                                                              | Basic authentication username used to access the metrics endpoint. Available via HTTP API <URL>/metrics.                                       |
| grafana.ini.metrics.basic_auth_password                              | string  | `"password"`                                                                                                                                                                                                                                              | Basic authentication password used to access the metrics endpoint. Available via HTTP API <URL>/metrics.                                       |
| grafana.ini.auth.generic_oauth.name                                  | string  | `"managementportal"`                                                                                                                                                                                                                                      | Name of generic oauth authentication method.                                                                                                   |
| grafana.ini.auth.generic_oauth.enabled                               | boolean | `true`                                                                                                                                                                                                                                                    | Enable generic oauth authentication.                                                                                                           |
| grafana.ini.auth.generic_oauth.auth_url                              | string  | `"http://localhost/managementportal/oauth/authorize"`                                                                                                                                                                                                     | Generic oauth authentication url.                                                                                                              |
| grafana.ini.auth.generic_oauth.token_url                             | string  | `"https://localhost/managementportal/oauth/token"`                                                                                                                                                                                                        | Generic oauth authentication token endpoint.                                                                                                   |
| grafana.ini.auth.generic_oauth.api_url                               | string  | `"http://management-portal:8080/managementportal/api/account"`                                                                                                                                                                                            | Generic oauth authentication api endpoint that returns user details.                                                                           |
| grafana.ini.auth.generic_oauth.client_id                             | string  | `"grafana_dashboard"`                                                                                                                                                                                                                                     | Generic oauth authentication client id.                                                                                                        |
| grafana.ini.auth.generic_oauth.client_secret                         | string  | `""`                                                                                                                                                                                                                                                      | Generic oauth authentication client secret.                                                                                                    |
| grafana.ini.auth.generic_oauth.empty_scopes                          | boolean | `true`                                                                                                                                                                                                                                                    | Enable using an empty scope during authentication.s                                                                                            |
| grafana.ini.smtp.enabled                                             | boolean | `false`                                                                                                                                                                                                                                                   | Enable SMTP.                                                                                                                                   |
| smtp.existingSecret                                                  | string  | `""`                                                                                                                                                                                                                                                      | Reference to an existing secret containing the smtp configuration.                                                                             |
| smtp.userKey                                                         | string  | `"user"`                                                                                                                                                                                                                                                  | Secret userKey.                                                                                                                                |
| smtp.userPassword                                                    | string  | `"password"`                                                                                                                                                                                                                                              | Secret userPassword.                                                                                                                           |
